<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preston Nabors - Personal Website</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        .content {
            margin-left: 17%;
            margin-top: 5rem; /* Adjusted margin to avoid header overlap */
            padding: 2rem;
            max-width: 70%;
            overflow-wrap: break-word; /* Ensure long words break to the next line */
            word-wrap: break-word; /* Ensure long words break to the next line */
            word-break: break-word; /* Ensure long words break to the next line */
            box-sizing: border-box; /* Include padding in the element's width */
            margin-left: auto; /* Center content */
            margin-right: auto; /* Center content */
        }
        .loading-message, .error-message {
            text-align: center;
            margin-top: 2rem;
            font-size: 1.2rem;
            color: #888;
        }
        @media (max-width: 768px) {
            .content {
                margin-left: 0;
                margin-top: 3rem;
                padding: 1rem;
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Include header -->
    <div id="header-container"></div>
    <div class="loading-message" id="loading-header">Loading header...</div>
    <div class="content" id="content">
        <!-- Content will be dynamically loaded here -->
    </div>
    <div class="loading-message" id="loading-footer">Loading footer...</div>
    <!-- Include footer -->
    <div id="footer-container"></div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const headerHeight = document.querySelector("header") ? document.querySelector("header").offsetHeight : 0;

        // Load header and footer
        fetch('header.html')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.text();
            })
            .then(data => {
                document.getElementById('header-container').innerHTML = data;
                document.getElementById('loading-header').style.display = 'none';
                initializeSidebar();
            })
            .catch(error => {
                document.getElementById('loading-header').textContent = 'Error loading header';
                console.error('Error loading header:', error);
            });

        fetch('footer.html')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.text();
            })
            .then(data => {
                document.getElementById('footer-container').innerHTML = data;
                document.getElementById('loading-footer').style.display = 'none';
            })
            .catch(error => {
                document.getElementById('loading-footer').textContent = 'Error loading footer';
                console.error('Error loading footer:', error);
            });

        // Function to fetch and display the content of a file
        function loadFileContent(filePath, fileType) {
            fetch(filePath)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    if (fileType === 'pdf') {
                        return response.blob();
                    } else {
                        return response.text();
                    }
                })
                .then(data => {
                    const contentDiv = document.getElementById('content');
                    if (fileType === 'pdf') {
                        const url = URL.createObjectURL(data);
                        contentDiv.innerHTML = '<iframe src="' + url + '" width="100%" height="600px"></iframe>';
                    } else {
                        contentDiv.innerHTML = '<pre>' + data + '</pre>';
                    }
                })
                .catch(error => {
                    const contentDiv = document.getElementById('content');
                    contentDiv.innerHTML = '<div class="error-message">Error loading content</div>';
                    console.error('Error loading file content:', error);
                });
        }

        // Fetch the welcome.html content by default
        loadFileContent('welcome.html', 'html');

        // List of files in the pages directory
        const files = [
            { name: "about-me.txt", path: "pages/about-me.txt" },
            { name: "bowl-bear.txt", path: "pages/bowl-bear.txt" },
            { name: "resume.pdf", path: "pages/resume.pdf" }
        ];

        function initializeSidebar() {
            const menu = document.getElementById('fileMenu');
            files.forEach(file => {
                const link = document.createElement('a');
                link.href = '#';
                link.className = 'menu-link';
                link.textContent = file.name.replace(/\.[^/.]+$/, ""); // Remove file extension
                link.addEventListener('click', function (event) {
                    event.preventDefault();
                    const fileType = file.name.split('.').pop();
                    loadFileContent(file.path, fileType);
                });
                menu.appendChild(link);
            });

            const menuLinks = document.querySelectorAll(".menu-link");

            menuLinks.forEach(function (link) {
                link.addEventListener("click", function (event) {
                    event.preventDefault();

                    const targetId = link.getAttribute("href");
                    const targetElement = document.querySelector(targetId);

                    const targetPosition = targetElement.getBoundingClientRect().top + window.scrollY - headerHeight;

                    window.scrollTo({
                        top: targetPosition,
                        behavior: "smooth"
                    });
                });
            });
        }
    });
</script>
</body>
</html>
