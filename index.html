<div class="content" id="content">
    <!-- Content will be dynamically loaded here -->
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Load header
        fetch('header.html')
            .then(response => response.text())
            .then(data => {
                document.body.insertAdjacentHTML('afterbegin', data);
                initializeSidebar();
            })
            .catch(error => {
                console.error('Error loading header:', error);
            });

        // Load footer
        fetch('footer.html')
            .then(response => response.text())
            .then(data => {
                document.body.insertAdjacentHTML('beforeend', data);
            })
            .catch(error => {
                console.error('Error loading footer:', error);
            });

        // Function to fetch and display the content of a file
        function loadFileContent(filePath, fileType) {
            fetch(filePath)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    if (fileType === 'pdf') {
                        return response.blob();
                    } else {
                        return response.text();
                    }
                })
                .then(data => {
                    const contentDiv = document.getElementById('content');
                    if (fileType === 'pdf') {
                        const url = URL.createObjectURL(data);
                        contentDiv.innerHTML = '<iframe src="' + url + '" width="100%" height="600px"></iframe>';
                    } else {
                        contentDiv.innerHTML = '<pre>' + data + '</pre>';
                    }
                })
                .catch(error => {
                    const contentDiv = document.getElementById('content');
                    contentDiv.innerHTML = '<div class="error-message">Error loading content</div>';
                    console.error('Error loading file content:', error);
                });
        }

        // Fetch the welcome.html content by default
        loadFileContent('welcome.html', 'html');

        // List of files in the pages directory
        const files = [
            { name: "about-me.txt", path: "pages/about-me.txt" },
            { name: "bowl-bear.txt", path: "pages/bowl-bear.txt" },
            { name: "resume.pdf", path: "pages/resume.pdf" }
        ];

        function initializeSidebar() {
            const menu = document.getElementById('fileMenu');
            files.forEach(file => {
                const link = document.createElement('a');
                link.href = '#';
                link.className = 'menu-link';
                link.textContent = file.name.replace(/\.[^/.]+$/, ""); // Remove file extension
                link.addEventListener('click', function (event) {
                    event.preventDefault();
                    const fileType = file.name.split('.').pop();
                    loadFileContent(file.path, fileType);
                });
                menu.appendChild(link);
            });

            const menuLinks = document.querySelectorAll(".menu-link");

            menuLinks.forEach(function (link) {
                link.addEventListener("click", function (event) {
                    event.preventDefault();

                    const targetId = link.getAttribute("href");
                    const targetElement = document.querySelector(targetId);

                    const targetPosition = targetElement.getBoundingClientRect().top + window.scrollY;

                    window.scrollTo({
                        top: targetPosition,
                        behavior: "smooth"
                    });
                });
            });
        }
    });
</script>
